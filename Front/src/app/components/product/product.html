<section class="container my-5 mt-5">
  <!-- Header -->
  <br />
  <br />
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">All Products</h2>

    <div class="input-group w-50 shadow-sm">
      <input
        [(ngModel)]="searchValue"
        type="search"
        placeholder="Search by name..."
        class="form-control"
      />

      <button class="btn btn-dark">Search</button>
    </div>
  </div>

  <!-- Products Grid -->
  <div class="row g-4">
    <!-- PRODUCT CARD -->

    @for(product of productsList | search:searchValue; track $index){

    <div class="col-6 col-md-4 col-lg-3">
      <div
        class="product-card rounded-4 shadow-sm p-3 h-100 d-flex flex-column"
        [routerLink]="['/details', product._id]"
        class="cursor-pointer"
      >
        <img
          [src]="`${baseURi}/uploads/images/${product.images[0]}`"
          class="w-100 rounded-3 object-fit-cover"
          height="220"
          [alt]="product.productName"
        />

        <h4 class="small mt-2 text-main fw-bold">{{ product.category.name }}</h4>

        <h3 class="h6 mb-2">{{ product.productName | termtext : 3 }}</h3>

        <div class="mt-3">
          <span class="text-danger fw-bold">
            {{ ((product.discountPrice / product.price) * 100).toFixed(0) }}% OFF</span
          >
          <div class="mt-2">
            <span class="h5 text-success fw-bold">
              {{ product.price - product.discountPrice }} EGP
            </span>
            <span class="ms-2 text-muted text-decoration-line-through"
              >{{ product.price }} EGP</span
            >
          </div>
          <div class="mt-2">
            <span
              style="font-size: smaller"
              class="text-danger fw-bold"
              *ngIf="product.stock <= 5 && product.stock !== 0"
            >
              {{ product.stock }} items remainig in the stock
            </span>
            <span
              style="font-size: smaller"
              class="text-danger fw-bold"
              *ngIf="product.stock === 0"
            >
              Out of stock
            </span>
          </div>
        </div>

        <button
          [disabled]="product.stock === 0"
          (click)="addToCart(product._id)"
          class="btn btn-dark mt-auto w-100 rounded-3"
        >
          Add to Cart
        </button>
      </div>
    </div>

    }
  </div>

  <!-- Pagination -->
  <nav aria-label="Page navigation" class="mt-4">
    <ul class="pagination justify-content-center">
      <li class="page-item disabled">
        <a class="page-link">Previous</a>
      </li>
      <li class="page-item active"><a class="page-link">1</a></li>

      <li class="page-item">
        <a class="page-link">Next</a>
      </li>
    </ul>
  </nav>
</section>
