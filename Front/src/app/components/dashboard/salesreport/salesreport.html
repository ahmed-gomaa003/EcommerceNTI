<div class="dashboard-container py-5 mt-4" *ngIf="!loading">
  <div class="header">
    <h1><i class="fa-solid fa-chart-pie"></i> Sales Dashboard</h1>
    <p>Real-Time Analytics | Clean â€¢ Modern â€¢ Powerful</p>
  </div>

  <!-- KPI CARDS -->
  <div class="kpi-grid">
    <div
      class="kpi-card"
      *ngFor="
        let kpi of [
          { label: 'Total Revenue', value: totalRevenue, suffix: 'EGP' },
          { label: 'Total Sold Quantity', value: totalQty },
          { label: 'Total Orders', value: totalPurchases }
        ]
      "
    >
      <div class="kpi-inner">
        <p>{{ kpi.label }}</p>
        <h2>{{ kpi.value | number }} {{ kpi.suffix }}</h2>
      </div>
    </div>
  </div>

  <!-- TOP PRODUCTS -->
  <div class="section">
    <h2>ðŸ”¥ Top Products</h2>

    <div class="card-grid">
      <div class="glass-card" *ngFor="let pro of reportData?.topProducts">
        <h4>{{ pro.name }}</h4>
        <div class="stats">
          <span
            >Revenue: <strong>{{ pro.revenue | number }} EGP</strong></span
          >
          <span
            >Sold: <strong>{{ pro.quantitySold }}</strong></span
          >
        </div>
      </div>
    </div>
  </div>

  <!-- TOP USERS -->
  <div class="section">
    <h2>ðŸ‘‘ Top Customers</h2>

    <div class="card-grid">
      <div class="glass-card" *ngFor="let user of reportData?.topUsers">
        <h4>{{ user.name }}</h4>
        <p class="email">{{ user.email }}</p>
        <div class="stats">
          <span
            >Spent: <strong>{{ user.totalSpent | number }} EGP</strong></span
          >
          <span
            >Orders: <strong>{{ user.ordersCount }}</strong></span
          >
        </div>
      </div>
    </div>
  </div>

  <!-- MONTHLY SALES -->
  <div class="section">
    <h2>ðŸ“… Monthly Sales</h2>

    <div class="month-grid">
      <div class="month-card" *ngFor="let month of reportData?.monthlySales">
        <h5>{{ month._id.month }} / {{ month._id.year }}</h5>
        <p>
          Revenue: <strong>{{ month.totalRevenue | number }}</strong>
        </p>
        <p>
          Qty: <strong>{{ month.totalQuantity }}</strong>
        </p>
      </div>
    </div>
  </div>
</div>
